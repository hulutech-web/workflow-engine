
name: Update Contributors
on:
  schedule:
    - cron: "0 12 * * *"  # ÊØèÂ§©UTCÊó∂Èó¥12ÁÇπËá™Âä®ËøêË°å
  workflow_dispatch:      # ÂÖÅËÆ∏ÊâãÂä®Ëß¶Âèë
  push:
    branches:
      - master            # ‰∏ªÂàÜÊîØÂêçÁß∞

jobs:
  update-contributors:
    runs-on: ubuntu-latest
    permissions:
      contents: write     # ÂøÖÈ°ªËµã‰∫àÂÜôÂÖ•ÊùÉÈôê

    steps:
      # Ê≠•È™§1ÔºöÊ£ÄÂá∫‰ª£Á†Å
      - name: Checkout
        uses: actions/checkout@v4
        with:
          ref: master
          fetch-depth: 0

      # Ê≠•È™§2Ôºö‰ΩøÁî®GitHubÂÆòÊñπAPIÁîüÊàêË¥°ÁåÆËÄÖÂàóË°®
      - name: Generate Contributors
        run: |
          echo -e "\n# Workflow Engine>> README.md
          
          echo -e "\n[![Contributors](https://img.shields.io/github/contributors/hulutech-web/workflow-engine?style=for-the-badge)](https://github.com/hulutech-web/workflow-engine/graphs/contributors)" >> README.md
          echo -e "\n[![Last Commit](https://img.shields.io/github/last-commit/hulutech-web/workflow-engine?style=for-the-badge)](https://github.com/hulutech-web/workflow-engine/commits/master)" >> README.md
          echo -e "\n[![License](https://img.shields.io/github/license/hulutech-web/workflow-engine?style=for-the-badge)](LICENSE)" >> README.md
          
          echo -e "\n## üèÜ Ë¥°ÁåÆËÄÖ" >> README.md
          echo '<a href="https://github.com/hulutech-web/workflow-engine/graphs/contributors">' >> README.md
          echo '  <img src="https://contrib.rocks/image?repo=hulutech-web/workflow-engine&columns=6&width=600" />' >> README.md
          echo '</a>' >> README.md
      # Ê≠•È™§3ÔºöÊèê‰∫§Êõ¥Êîπ
      - name: Commit Changes
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add README.md
          git commit -m "docs: Update contributors [skip ci]"
          git push origin HEAD:master